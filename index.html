<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>料理アキネーター（ローカル版）</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    button { margin: 10px; padding: 10px 20px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>料理アキネーター 🍽️</h1>
  <div id="conversation"></div>
  <p id="question"></p>
  <button onclick="answer('yes')">はい</button>
  <button onclick="answer('no')">いいえ</button>
  <p id="result" class="hidden"></p>

  <script>
    // 料理データベース（50種類以上）
    const recipes = [
      "カレーライス", "ハンバーグ", "焼き魚", "味噌汁", "親子丼", "うな丼", "寿司",
      "ラーメン", "天ぷら", "お好み焼き", "たこ焼き", "餃子", "麻婆豆腐",
      "チャーハン", "ビーフシチュー", "ミートソースパスタ", "カルボナーラ", "ピザ",
      "グラタン", "ドリア", "シーザーサラダ", "冷やし中華", "サンドイッチ", "オムライス",
      "生姜焼き", "唐揚げ", "酢豚", "回鍋肉", "天津飯", "フォー", "ナシゴレン",
      "バターチキンカレー", "グリーンカレー", "カオマンガイ", "ビビンバ", "トッポギ",
      "サムギョプサル", "ガパオライス", "ローストビーフ", "エビフライ",
      "ホットドッグ", "ハヤシライス", "スンドゥブ", "もつ鍋", "鍋焼きうどん",
      "かつ丼", "牛丼", "天丼", "焼きそば", "煮物"
    ];

    // 質問ツリー（yes/noによって進む）
    const questions = [
      {
        q: "温かい料理ですか？",
        yes: 1, no: 2
      },
      {
        q: "ご飯が主食ですか？",
        yes: 3, no: 4
      },
      {
        q: "冷たい料理ですか？",
        yes: 5, no: 6
      },
      {
        q: "日本料理ですか？",
        yes: ["寿司", "親子丼", "カツ丼", "味噌汁", "牛丼"],
        no: ["ビビンバ", "ガパオライス", "ナシゴレン", "フォー", "カオマンガイ"]
      },
      {
        q: "麺料理ですか？",
        yes: ["ラーメン", "うどん", "焼きそば", "スパゲッティ", "冷やし中華"],
        no: ["グラタン", "ピザ", "サラダ", "シチュー", "サンドイッチ"]
      },
      {
        q: "野菜がメインですか？",
        yes: ["シーザーサラダ", "煮物", "冷やし中華"],
        no: ["寿司", "サンドイッチ", "お好み焼き"]
      },
      {
        q: "肉料理ですか？",
        yes: 7, no: 8
      },
      {
        q: "揚げ物ですか？",
        yes: ["唐揚げ", "エビフライ", "トンカツ", "天ぷら", "フライドチキン"],
        no: ["生姜焼き", "ビーフシチュー", "ハンバーグ", "麻婆豆腐"]
      },
      {
        q: "魚料理ですか？",
        yes: ["焼き魚", "煮魚", "寿司", "天ぷら"],
        no: ["ドリア", "グラタン", "スンドゥブ"]
      }
    ];

    let current = 0;
    let step = 0;

    function showQuestion() {
      if (step >= 20) {
        showResult(["（質問数が多すぎます。結果を特定できません）"]);
        return;
      }

      const q = questions[current];
      if (typeof q.q === 'string') {
        document.getElementById("question").textContent = q.q;
      } else {
        showResult(["（不明な質問）"]);
      }
    }

    function answer(ans) {
      const q = questions[current];
      step++;
      const next = ans === 'yes' ? q.yes : q.no;

      if (Array.isArray(next)) {
        showResult(next);
      } else {
        current = next;
        showQuestion();
      }
    }

    function showResult(suggestions) {
      document.getElementById("question").classList.add("hidden");
      document.getElementById("result").classList.remove("hidden");
      document.getElementById("result").innerHTML = "おすすめ料理：<ul>" + suggestions.map(r => `<li>${r}</li>`).join('') + "</ul>";
    }

    // 初期表示
    showQuestion();
  </script>
</body>
</html>
